---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import NavBar from '../../components/NavBar.astro';
import '../../styles/tailwind.css';
import '../../styles/heading-styles.css';
// import '../../styles/custom-headings.css';

// Get the slug from the URL
export async function getStaticPaths() {
  const posts = await getCollection('posts');
  
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

// Get the post data
const { post } = Astro.props;
const { Content } = await post.render();
---

<body class="h-screen overflow-y-auto">
  <Layout title={post.data.title}>
    <div class="bg-custom-cream min-h-screen">
      <div class="flex flex-col">
        <NavBar />
        
        <div class="p-4 md:px-10 md:py-8 max-w-3xl mx-auto">
          <div class="mb-4">
            <h1>{post.data.title}</h1>
            <p class="text-sm">{post.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
            
            <!-- {post.data.tags && (
              <div class="flex flex-wrap gap-2 mb-6">
                {post.data.tags.map(tag => (
                  <span class="px-2 py-1 bg-custom-amber bg-opacity-10 text-custom-amber text-sm rounded-sm">
                    {tag}
                  </span>
                ))}
              </div>
            )} -->
          </div>
          
          <div class="prose prose-amber prose-a:text-custom-amber max-w-none">
            <div class="custom-headings">
              <Content />
            </div>
          </div>
        </div>
      </div>
    </div>
  </Layout>

  <style is:global>
    .custom-headings h1 {
      font-size: 5rem !important;
      line-height: 4rem !important;
      font-family: 'xe Dogma', serif !important;
      font-weight: normal !important;
      margin-top: 0.5em !important;
      margin-bottom: 0.25em !important;
    }
    
    .custom-headings h2 {
      font-size: 4rem !important;
      line-height: 2.5rem !important;
      font-family: 'xe Dogma', serif !important;
      font-weight: normal !important;
      margin-top: 0.5em !important;
      margin-bottom: 0.25em !important;
    }
    
    .custom-headings h3 {
      font-size: 2.5rem !important;
      line-height: 2rem !important;
      font-family: 'xe Dogma', serif !important;
      font-weight: normal !important;
      margin-top: 0.5em !important;
      margin-bottom: 0.25em !important;
    }
    
    /* Ensure italic text is properly styled */
    .prose em, 
    .prose i {
      font-style: italic !important;
    }
    
    /* Style image captions */
    .prose p > em,
    .prose img + em {
      display: block;
      text-align: center;
      margin-top: 0.25rem;
      font-size: 0.9rem;
    }
  </style>
</body> 